(function(b){var a={namespace:"zencache"},d=b(window),c=b(document);a.onReady=function(){
/*![pro strip-from='lite']*/
;a.dirStatsData=null;a.dirStatsRunning=false;
/*![/pro]*/
;a.$menuPage=b("#plugin-menu-page");a.vars=window[a.namespace+"_menu_page_vars"];b(".plugin-menu-page-panel-heading",a.$menuPage).on("click",a.togglePanel);b(".plugin-menu-page-panels-open",a.$menuPage).on("click",a.toggleAllPanelsOpen);b(".plugin-menu-page-panels-close",a.$menuPage).on("click",a.toggleAllPanelsClose);b("[data-action]",a.$menuPage).on("click",a.doDataAction);b("[data-toggle-target]",a.$menuPage).on("click",a.doDataToggleTarget);b('select[name$="_enable\\]"], select[name$="_enable_flavor\\]"]',a.$menuPage).not(".no-if-enabled").on("change",a.enableDisable).trigger("change");b('textarea[name$="[cdn_hosts]"]',a.$menuPage).on("input propertychange",a.handleCdnHostsChange);
/*![pro strip-from='lite']*/
;if(b(".plugin-menu-page-dir-stats",a.$menuPage).length){b(".plugin-menu-page-dir-stats-button").on("click",a.dirStats);a.dirStats()}
/*![/pro]*/
};a.toggleAllPanelsOpen=function(e){a.preventDefault(e);b(".plugin-menu-page-panel-heading",a.$menuPage).addClass("open").next(".plugin-menu-page-panel-body").addClass("open")};a.toggleAllPanelsClose=function(e){a.preventDefault(e);b(".plugin-menu-page-panel-heading",a.$menuPage).removeClass("open").next(".plugin-menu-page-panel-body").removeClass("open")};a.togglePanel=function(e){a.preventDefault(e);b(this).toggleClass("open").next(".plugin-menu-page-panel-body").toggleClass("open")};a.doDataAction=function(e){a.preventDefault(e);var g=b(this),f=g.data();if(typeof f.confirmation!=="string"||confirm(f.confirmation)){location.href=f.action}};a.enableDisable=function(h){var i=b(this),f=i.val(),e=i.attr("name"),g=i.closest(".plugin-menu-page-panel");if((e.indexOf("_enable]")!==-1&&(f===""||f==="1"))||(e.indexOf("_flavor]")!==-1&&f!=="0")){g.find(".plugin-menu-page-panel-if-enabled").css("opacity",1).find(":input").removeAttr("readonly")}else{g.find(".plugin-menu-page-panel-if-enabled").css("opacity",0.4).find(":input").attr("readonly","readonly")}};a.doDataToggleTarget=function(f){a.preventDefault(f);var g=b(this),e=b(g.data("toggleTarget"));if(e.is(":visible")){e.hide();g.find(".si").removeClass("si-eye-slash").addClass("si-eye")}else{e.show();g.find(".si").removeClass("si-eye").addClass("si-eye-slash")}};a.handleCdnHostsChange=function(f){var g=b(this),e=b('input[name$="[cdn_host]"]',a.$menuPage);if(b.trim(g.val())){if(e.val()){e.data("hiddenValue",e.val())}e.attr("disabled","disabled").val("")}else{if(!e.val()){e.val(e.data("hiddenValue"))}e.removeAttr("disabled");g.val("")}};
/*![pro strip-from='lite']*/
;a.dirStats=function(q){a.preventDefault(q);if(a.dirStatsRunning){return}a.dirStatsRunning=true;var t=!a.vars.isMultisite||a.vars.currentUserHasNetworkCap;var o=b("body"),n=b(".plugin-menu-page-dir-stats",a.$menuPage),s=n.find(".-wrapper"),p=s.find(".-container"),e=p.find(".-refreshing"),g=p.find(".-chart-a"),f=p.find(".-chart-b"),i=p.find(".-totals"),k=i.find(".-files"),r=i.find(".-size"),j=i.find(".-dir"),h=p.find(".-disk"),l=h.find(".-free"),m=h.find(".-size");var u=function(){e.show();g.hide();f.hide();i.css("visibility","hidden");h.css("visibility","hidden");if(!t){j.hide()}if(!a.dirStatsData){var w={_wpnonce:a.vars._wpnonce};w[a.namespace]={ajaxDirStats:"1"};b.post(a.vars.ajaxURL,w,function(x){a.dirStatsData=x;v()})}else{setTimeout(v,500)}},v=function(){if(!a.dirStatsData){a.dirStatsRunning=false;return}e.hide();g.css("display","block");f.css("display","block");var X=null,W=null,S=null,Y=null;var x=t?"forCache":"forHostCache",L=t?"forHtmlCCache":"forHtmlCHostCache",A=t?"largestCacheSize":"largestHostCacheSize",y=t?"largestCacheCount":"largestHostCacheCount";var B=a.dirStatsData[A].size,K=a.dirStatsData[A].days,D=a.dirStatsData[y].count,R=a.dirStatsData[y].days,Q=a.dirStatsData[x].stats.total_links_files,Z=a.dirStatsData[L].stats.total_links_files,E=Q+Z,I=a.dirStatsData[x].stats.total_size,N=a.dirStatsData[L].stats.total_size,O=I+N,M=a.dirStatsData[x].stats.disk_total_space,J=a.dirStatsData[x].stats.disk_free_space,F=0,V=0,w=0,H=0,C=0,P=0;if(a.vars.isMultisite&&a.vars.currentUserHasNetworkCap){F=a.dirStatsData.forHostCache.stats.total_links_files;V=a.dirStatsData.forHtmlCHostCache.stats.total_links_files;w=F+V;H=a.dirStatsData.forHostCache.stats.total_size;C=a.dirStatsData.forHtmlCHostCache.stats.total_size;P=H+C}var G={responsive:true,animationSteps:35,scaleFontSize:14,scaleShowLine:true,scaleBeginAtZero:true,scaleFontFamily:"sans-serif",scaleShowLabelBackdrop:true,scaleBackdropPaddingY:2,scaleBackdropPaddingX:4,scaleFontColor:"rgba(0,0,0,1)",scaleBackdropColor:"rgba(255,255,255,1)",scaleLineColor:"rgba(0,0,0,0.15)",scaleLabel:function(aa){return a.numberFormat(aa.value)+" "+(aa.value===1?a.vars.i18n.file:a.vars.i18n.files)},tooltipFontSize:18,tooltipFillColor:"rgba(0,0,0,1)",tooltipFontFamily:"Georgia, serif",tooltipTemplate:function(aa){return aa.label+": "+a.numberFormat(aa.value)+" "+(aa.value===1?a.vars.i18n.file:a.vars.i18n.files)},segmentShowStroke:true,segmentStrokeWidth:2,segmentStrokeColor:"rgba(255,255,255,1)"},U=b.extend({},G,{scaleLabel:function(aa){return a.bytesToSizeLabel(aa.value)},tooltipTemplate:function(aa){return aa.label+": "+a.bytesToSizeLabel(aa.value)}});var z=[],T=[];z.push({value:D,label:a.vars.i18n.xDayHigh.replace("%s",R),color:"#ff5050",highlight:"#c63f3f"});z.push({value:E,label:a.vars.i18n.currentTotal,color:"#46bf52",highlight:"#33953e"});z.push({value:Q,label:a.vars.i18n.pageCache,color:"#0096CC",highlight:"#057ca7"});z.push({value:Z,label:a.vars.i18n.htmlCompressor,color:"#FFC870",highlight:"#d6a85d"});if(a.vars.isMultisite&&a.vars.currentUserHasNetworkCap){z.push({value:w,label:a.vars.i18n.currentSite,color:"#46bfb4",highlight:"#348f87"})}T.push({value:B,label:a.vars.i18n.xDayHigh.replace("%s",K),color:"#ff5050",highlight:"#c63f3f"});T.push({value:O,label:a.vars.i18n.currentTotal,color:"#46bf52",highlight:"#33953e"});T.push({value:I,label:a.vars.i18n.pageCache,color:"#0096CC",highlight:"#057ca7"});T.push({value:N,label:a.vars.i18n.htmlCompressor,color:"#FFC870",highlight:"#d6a85d"});if(a.vars.isMultisite&&a.vars.currentUserHasNetworkCap){T.push({value:P,label:a.vars.i18n.currentSite,color:"#46bfb4",highlight:"#348f87"})}if((X=n.data("chartA"))){X.destroy()}if((W=n.data("chartB"))){W.destroy()}if((S=n.data("chartADimensions"))){g.find(".-canvas").attr("width",parseInt(S.width)).attr("height",parseInt(S.height)).css(S)}if((Y=n.data("chartBDimensions"))){f.find(".-canvas").attr("width",parseInt(Y.width)).attr("height",parseInt(Y.height)).css(Y)}if(g.length){X=new Chart(g.find(".-canvas")[0].getContext("2d")).Pie(z,G);n.data("chartA",X).data("chartADimensions",{width:g.find(".-canvas").width()+"px",height:g.find(".-canvas").height()+"px"})}if(f.length){W=new Chart(f.find(".-canvas")[0].getContext("2d")).PolarArea(T,U);n.data("chartB",W).data("chartBDimensions",{width:f.find(".-canvas").width()+"px",height:f.find(".-canvas").height()+"px"})}i.css("visibility","visible");k.find(".-value").html(a.escHtml(a.numberFormat(E)+" "+(E===1?a.vars.i18n.file:a.vars.i18n.files)));r.find(".-value").html(a.escHtml(a.bytesToSizeLabel(O)));h.css("visibility","visible");m.find(".-value").html(a.escHtml(a.bytesToSizeLabel(M)));l.find(".-value").html(a.escHtml(a.bytesToSizeLabel(J)));a.dirStatsRunning=false};u()};
/*![/pro]*/
;a.bytesToSizeLabel=function(f,e){if(isNaN(f)||f<=1){return f===1?"1 byte":"0 bytes"}if(isNaN(e)||e<=0){e=0}var i=1024,j=Math.floor(Math.log(f)/Math.log(i)),h=["bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],g=(f/Math.pow(i,j));return g.toFixed(e)+" "+h[j]};a.numberFormat=function(f,e){if(isNaN(f)){return String(f)}if(isNaN(e)||e<=0){e=0}return f.toFixed(e).replace(/./g,function(g,i,h){return i&&g!=="."&&((h.length-i)%3===0)?","+g:g})};a.escHtml=function(f){var e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};return String(f).replace(/[&<>"']/g,function(g){return e[g]})};a.preventDefault=function(f,e){if(!f){return}f.preventDefault();if(e){f.stopImmediatePropagation()}};c.ready(a.onReady)})(jQuery);